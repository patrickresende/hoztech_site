# Generated by Django 5.2.1 on 2025-05-25 02:40

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AdminAuthImage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('image', models.ImageField(upload_to='admin_auth_images/')),
                ('name', models.CharField(max_length=100)),
                ('category', models.CharField(max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Imagem de Autenticação',
                'verbose_name_plural': 'Imagens de Autenticação',
                'ordering': ['category', 'name'],
                'indexes': [models.Index(fields=['category'], name='hoztech_adm_categor_e0a2e9_idx'), models.Index(fields=['is_active'], name='hoztech_adm_is_acti_360f16_idx')],
            },
        ),
        migrations.CreateModel(
            name='CookiePreference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('client_id', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('essential_cookies', models.BooleanField(default=True)),
                ('performance_cookies', models.BooleanField(default=True)),
                ('marketing_cookies', models.BooleanField(default=True)),
                ('first_visit', models.DateTimeField(default=django.utils.timezone.now)),
                ('last_visit', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('browser', models.CharField(blank=True, max_length=100, null=True)),
                ('browser_version', models.CharField(blank=True, max_length=50, null=True)),
                ('os', models.CharField(blank=True, max_length=100, null=True)),
                ('os_version', models.CharField(blank=True, max_length=50, null=True)),
                ('device_type', models.CharField(blank=True, max_length=50, null=True)),
                ('device_brand', models.CharField(blank=True, max_length=100, null=True)),
                ('device_model', models.CharField(blank=True, max_length=100, null=True)),
                ('is_mobile', models.BooleanField(default=False)),
                ('is_tablet', models.BooleanField(default=False)),
                ('is_pc', models.BooleanField(default=False)),
                ('is_bot', models.BooleanField(default=False)),
                ('is_touch_capable', models.BooleanField(default=False)),
                ('country', models.CharField(blank=True, max_length=100, null=True)),
                ('city', models.CharField(blank=True, max_length=100, null=True)),
                ('region', models.CharField(blank=True, max_length=100, null=True)),
                ('timezone', models.CharField(blank=True, max_length=50, null=True)),
                ('screen_width', models.IntegerField(blank=True, null=True)),
                ('screen_height', models.IntegerField(blank=True, null=True)),
                ('screen_resolution', models.CharField(blank=True, max_length=50, null=True)),
                ('change_history', models.JSONField(blank=True, default=list)),
            ],
            options={
                'verbose_name': 'Preferência de Cookie',
                'verbose_name_plural': 'Preferências de Cookies',
                'ordering': ['-last_visit'],
                'indexes': [models.Index(fields=['device_type'], name='hoztech_coo_device__827d3f_idx'), models.Index(fields=['browser'], name='hoztech_coo_browser_31dae2_idx'), models.Index(fields=['os'], name='hoztech_coo_os_0dd141_idx'), models.Index(fields=['last_visit'], name='hoztech_coo_last_vi_5a0b72_idx'), models.Index(fields=['is_mobile', 'is_tablet', 'is_pc'], name='hoztech_coo_is_mobi_f5e64a_idx')],
            },
        ),
        migrations.CreateModel(
            name='VisitorAccess',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ip_address', models.GenericIPAddressField(db_index=True)),
                ('user_agent', models.TextField()),
                ('endpoint', models.CharField(db_index=True, max_length=255)),
                ('method', models.CharField(max_length=10)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('country', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('city', models.CharField(blank=True, max_length=100, null=True)),
                ('isp', models.CharField(blank=True, max_length=255, null=True)),
                ('browser', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('browser_version', models.CharField(blank=True, max_length=50, null=True)),
                ('os', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('os_version', models.CharField(blank=True, max_length=50, null=True)),
                ('device_type', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
                ('device_model', models.CharField(blank=True, max_length=100, null=True)),
                ('device_brand', models.CharField(blank=True, max_length=100, null=True)),
                ('screen_width', models.IntegerField(blank=True, null=True)),
                ('screen_height', models.IntegerField(blank=True, null=True)),
                ('screen_resolution', models.CharField(blank=True, max_length=50, null=True)),
                ('referrer', models.URLField(blank=True, max_length=500, null=True)),
                ('referrer_domain', models.CharField(blank=True, db_index=True, max_length=255, null=True)),
                ('session_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('time_on_page', models.IntegerField(blank=True, help_text='Tempo em segundos', null=True)),
                ('pages_visited', models.JSONField(blank=True, default=list, help_text='Lista de páginas visitadas em sequência')),
                ('is_bounce', models.BooleanField(default=False, help_text='Visitante saiu sem interagir')),
                ('is_conversion', models.BooleanField(default=False, help_text='Visitante realizou uma conversão')),
                ('conversion_type', models.CharField(blank=True, help_text='Tipo de conversão (download, contato, etc)', max_length=50, null=True)),
                ('language', models.CharField(blank=True, max_length=10, null=True)),
                ('timezone', models.CharField(blank=True, max_length=50, null=True)),
                ('is_mobile', models.BooleanField(db_index=True, default=False)),
                ('is_tablet', models.BooleanField(db_index=True, default=False)),
                ('is_desktop', models.BooleanField(db_index=True, default=False)),
                ('is_bot', models.BooleanField(db_index=True, default=False)),
            ],
            options={
                'verbose_name': 'Acesso de Visitante',
                'verbose_name_plural': 'Acessos de Visitantes',
                'ordering': ['-timestamp'],
                'get_latest_by': 'timestamp',
                'indexes': [models.Index(fields=['ip_address', 'timestamp'], name='hoztech_vis_ip_addr_4f5871_idx'), models.Index(fields=['session_id', 'timestamp'], name='hoztech_vis_session_cbc75d_idx'), models.Index(fields=['browser', 'os', 'device_type'], name='hoztech_vis_browser_991712_idx'), models.Index(fields=['country', 'city'], name='hoztech_vis_country_448157_idx'), models.Index(fields=['is_mobile', 'is_tablet', 'is_desktop'], name='hoztech_vis_is_mobi_115392_idx'), models.Index(fields=['is_conversion', 'conversion_type'], name='hoztech_vis_is_conv_451097_idx'), models.Index(fields=['referrer_domain'], name='hoztech_vis_referre_1e8fe6_idx')],
            },
        ),
        migrations.CreateModel(
            name='AdminAccessLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ip_address', models.GenericIPAddressField()),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('action', models.CharField(max_length=100)),
                ('details', models.JSONField(blank=True, null=True)),
                ('success', models.BooleanField(default=True)),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Log de Acesso Administrativo',
                'verbose_name_plural': 'Logs de Acesso Administrativo',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user'], name='hoztech_adm_user_id_6d58d4_idx'), models.Index(fields=['timestamp'], name='hoztech_adm_timesta_228901_idx'), models.Index(fields=['action'], name='hoztech_adm_action_7dee39_idx')],
            },
        ),
        migrations.CreateModel(
            name='AdminUserAuthPreference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_2fa_enabled', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('login_attempts', models.IntegerField(default=0)),
                ('last_login_attempt', models.DateTimeField(blank=True, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('lock_expires_at', models.DateTimeField(blank=True, null=True)),
                ('require_password_change', models.BooleanField(default=False)),
                ('last_password_change', models.DateTimeField(blank=True, null=True)),
                ('session_timeout', models.IntegerField(default=30)),
                ('allowed_ips', models.JSONField(blank=True, default=list)),
                ('notify_on_login', models.BooleanField(default=True)),
                ('notify_on_password_change', models.BooleanField(default=True)),
                ('auth_images', models.ManyToManyField(related_name='selected_by_users', to='hoztech.adminauthimage')),
                ('last_auth_image', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='last_used_by', to='hoztech.adminauthimage')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='auth_preference', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Preferência de Autenticação',
                'verbose_name_plural': 'Preferências de Autenticação',
                'indexes': [models.Index(fields=['is_2fa_enabled'], name='hoztech_adm_is_2fa__52eae8_idx'), models.Index(fields=['is_locked'], name='hoztech_adm_is_lock_33aa95_idx'), models.Index(fields=['last_login_attempt'], name='hoztech_adm_last_lo_cd4bef_idx'), models.Index(fields=['require_password_change'], name='hoztech_adm_require_b3a0e9_idx')],
            },
        ),
        migrations.CreateModel(
            name='DataExport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('export_type', models.CharField(choices=[('cookies', 'Cookies'), ('access', 'Acessos'), ('all', 'Todos os Dados')], max_length=10, verbose_name='Tipo de Exportação')),
                ('date_range_start', models.DateField(verbose_name='Data Inicial')),
                ('date_range_end', models.DateField(verbose_name='Data Final')),
                ('format', models.CharField(choices=[('json', 'JSON'), ('csv', 'CSV'), ('xlsx', 'Excel (XLSX)')], default='json', max_length=10, verbose_name='Formato')),
                ('status', models.CharField(choices=[('pending', 'Pendente'), ('processing', 'Processando'), ('completed', 'Concluído'), ('failed', 'Falhou')], default='pending', max_length=20, verbose_name='Status')),
                ('file_path', models.CharField(blank=True, max_length=255, null=True, verbose_name='Caminho do Arquivo')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='Mensagem de Erro')),
                ('compress', models.BooleanField(default=False, verbose_name='Comprimido')),
                ('include_headers', models.BooleanField(default=True, verbose_name='Incluir Cabeçalhos')),
                ('download_count', models.PositiveIntegerField(default=0, verbose_name='Downloads')),
                ('last_download', models.DateTimeField(blank=True, null=True, verbose_name='Último Download')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Criado em')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Atualizado em')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exports', to=settings.AUTH_USER_MODEL, verbose_name='Usuário')),
            ],
            options={
                'verbose_name': 'Exportação',
                'verbose_name_plural': 'Exportações',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', 'export_type', 'status'], name='hoztech_dat_user_id_b2612f_idx'), models.Index(fields=['created_at'], name='hoztech_dat_created_424853_idx'), models.Index(fields=['status'], name='hoztech_dat_status_8dc69b_idx')],
            },
        ),
        migrations.CreateModel(
            name='PDFDownload',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='Nome')),
                ('email', models.EmailField(max_length=254, verbose_name='E-mail')),
                ('company', models.CharField(blank=True, max_length=100, null=True, verbose_name='Empresa')),
                ('role', models.CharField(blank=True, max_length=100, null=True, verbose_name='Cargo')),
                ('phone', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefone')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('marketing_consent', models.BooleanField(default=False, verbose_name='Aceito receber comunicações de marketing')),
                ('source', models.CharField(default='website', max_length=50, verbose_name='Origem do lead')),
                ('pdf_file', models.FileField(blank=True, help_text='Arquivo PDF do manual', null=True, upload_to='pdfs/manual_cyberseguranca/', verbose_name='Arquivo PDF')),
                ('download_count', models.PositiveIntegerField(default=0, help_text='Quantidade de vezes que o PDF foi baixado', verbose_name='Número de downloads')),
                ('last_download', models.DateTimeField(blank=True, help_text='Data e hora do último download', null=True, verbose_name='Último download')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pdf_downloads', to=settings.AUTH_USER_MODEL, verbose_name='Usuário que realizou o download')),
            ],
            options={
                'verbose_name': 'Download de PDF',
                'verbose_name_plural': 'Downloads de PDF',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['email'], name='hoztech_pdf_email_1748bf_idx'), models.Index(fields=['created_at'], name='hoztech_pdf_created_48f7b7_idx'), models.Index(fields=['marketing_consent'], name='hoztech_pdf_marketi_b9cd7e_idx'), models.Index(fields=['source'], name='hoztech_pdf_source_cb12aa_idx')],
            },
        ),
        migrations.CreateModel(
            name='CookieConsent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('cookie_name', models.CharField(db_index=True, max_length=100)),
                ('value', models.TextField()),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('category', models.CharField(choices=[('essential', 'Essencial'), ('performance', 'Desempenho'), ('marketing', 'Marketing'), ('analytics', 'Analytics'), ('preferences', 'Preferências'), ('security', 'Segurança')], db_index=True, max_length=50)),
                ('browser_version', models.CharField(blank=True, max_length=50, null=True)),
                ('browser_settings', models.JSONField(blank=True, default=dict, help_text='Configurações de privacidade do navegador')),
                ('consent_source', models.CharField(choices=[('banner', 'Banner de Cookies'), ('settings', 'Configurações'), ('preferences', 'Preferências do Usuário'), ('auto', 'Automático')], default='banner', max_length=50)),
                ('consent_method', models.CharField(choices=[('click', 'Clique'), ('scroll', 'Scroll'), ('auto', 'Automático'), ('settings', 'Configurações')], default='click', max_length=50)),
                ('consent_duration', models.IntegerField(blank=True, help_text='Duração do consentimento em dias', null=True)),
                ('is_third_party', models.BooleanField(default=False, help_text='Cookie de terceiros')),
                ('third_party_domain', models.CharField(blank=True, max_length=255, null=True)),
                ('purpose', models.TextField(blank=True, help_text='Propósito do cookie', null=True)),
                ('data_retention', models.IntegerField(blank=True, help_text='Período de retenção em dias', null=True)),
                ('visitor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cookie_consents', to='hoztech.visitoraccess')),
            ],
            options={
                'verbose_name': 'Consentimento de Cookie',
                'verbose_name_plural': 'Consentimentos de Cookies',
                'ordering': ['-timestamp'],
                'get_latest_by': 'timestamp',
                'indexes': [models.Index(fields=['cookie_name', 'timestamp'], name='hoztech_coo_cookie__a4f2c2_idx'), models.Index(fields=['category', 'timestamp'], name='hoztech_coo_categor_5410cf_idx'), models.Index(fields=['visitor', 'category'], name='hoztech_coo_visitor_467a14_idx'), models.Index(fields=['is_third_party', 'third_party_domain'], name='hoztech_coo_is_thir_3ae7cc_idx'), models.Index(fields=['consent_source', 'consent_method'], name='hoztech_coo_consent_9807cd_idx')],
            },
        ),
    ]
